# Модуль логирования 

Управляет системой логированя WFC. 

```
2015-09-30 17:17:56.640 CONFIG END       core::start: module 'startup'...Done!
2015-09-30 17:17:56.640 SYSLOG MESSAGE   daemon ./demod started!
2015-09-30 17:17:56.640 DOMAIN MESSAGE   Daemon reconfigured!
2015-09-30 17:17:59.628 CONFIG BEGIN     Reload Configuration And Reconfigure
2015-09-30 17:17:59.629 CONFIG END       Reload Configuration And Reconfigure
2015-09-30 17:17:59.629 CONFIG MESSAGE   ----------- configuration -------------
2015-09-30 17:17:59.629 CONFIG BEGIN     core::configure: object 'client-tcp'...
```
Каждая строка лога систоит:

* Дата 
* Время 
* Имя лога. В зависимости от настроек каждый лог может писаться в отдельный файл, или все логи в один файл (по умолчаню)
  * CONFIG - конфигурирование и инициализация системы
  * DOMIAN - прикладной лог (важные сообщения)
  * COMMON - общий лог (все остальное)
  * SYSLOG - системый лог плюс запись в syslog (критические сообщения)
  * DEBUG  - лог отладки (отключаеться в релиз-версии на уровне компилятора )
  * JSONRPC - лог jsonrpc движка
  * IOW     - лог сетевого движка
* Тип сообщения. 
  * ERROR   - ошибки, после которых система сохраняет работоспособность и консистентность 
  * WARNING - предупреждения, например о превышении размера очереди. 
  * MESSAGE - прочие уведомления
  * FATAL   - фатальная ошибка. Обычно далее следует останов демона 
  * BEGIN   - начало какого либо процесса (например загрузка БД)
  * END     - окончание какого либо процесса (например загрузка БД)
  * DEBUG   - отладочные сообщения (отключаеться в релиз-версии на уровне компилятора )
  * TRACE   - трассировка ввода/вывода (отключаеться в релиз-версии на уровне компилятора )
  * PROGRESS - трассировка прогресса длительных операций без перевода строки (например процент загрузки БД)
* Сообщение. Произвольный формат

## Настройки 

```json
{
  "logger":{
      "enabled":true,
      "startup_priority":-1000,
      "shutdown_priority":1000,

      "limit":0,
      "milliseconds":false,
      "single":true,
      "stdout":"clog",
      "path":"./demo",
      "syslog":"",

      "deny":[],
      "custom":{}
  }
}
```

* enabled - при отключении модуля, запись делаеться в clog без форматировани и отметок времени ("имя" "тип" "сообщение")
* startup_priority  - приоритет запуска должен быть минимальный, чтобы модуль запускался раньше других объектов
* shutdown_priority - приоритет останова должен быть максимальный, чтобы модуль останавливался позже других объектов
* limit - ограничение на размер файла лога в байтах. При достижении предела файл обнуляеться. 0 - без ограничений
* milliseconds - включить отметки миллисекунд (например 17:17:59.629)
* stdout - вывод помимо файла. Возможные значения (clog, cout, cerr или пустая строка (без вывода) ).
* path - перфикс пути файла лога (см. single)
* single - если true то общий файл для всех типов логов (path+".log"), иначе для каждого типа свой лог (path+"-"+имя+".log")
* syslog - идентификатор syslog'a для ::openlog. Разрешает паралельную запись в системный лог, для логов syslog 
* deny - запрещает запись логов или типов сообщений. Например ["iow", "DEBUG"], запрещает запись всех iow-логов и DEBUG сообщений для остальных логов. Имя задаеться в нижнем регистре, а тип верхним

### Кастомные настройки логов

Позволяет настроить каждый лог индивидульно. Ассациотивный массив, где ключем имя лога в нижнем регистре:

```json
{
  "logger":{
      /*....*/
      "custom":{
        "debug":{
            "limit":0,
            "milliseconds":false,
            "stdout":"clog",
            "path":"./demo",
            "deny":[]
        }
      }
  }
}
```

* path - если не задан задан, то берется из основных настроек
* deny - расширяет список для типов сообщений основных настроек. 

